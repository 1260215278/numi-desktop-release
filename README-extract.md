# 压缩包解压功能

本项目支持自动解压上传文件中的压缩包。

## 支持的压缩格式

-   **ZIP** (.zip)
-   **TAR.GZ** (.tar.gz)
-   **TAR** (.tar)
-   **RAR** (.rar) - 需要安装 unrar
-   **7Z** (.7z) - 需要安装 p7zip

## 使用方法

### 1. GitHub Actions 自动解压

当您推送代码到 `main` 分支时，GitHub Actions 会自动：

1. 扫描项目中的所有压缩包文件
2. 自动解压到 `extracted/` 目录
3. 将解压后的文件作为构建产物上传

### 2. 本地测试

在本地测试解压功能：

```bash
# 运行本地解压测试
./local-extract.sh
```

### 3. 手动运行解压脚本

```bash
# 直接运行解压脚本
./extract-scripts.sh
```

## 解压结果

-   所有解压的文件会放在 `extracted/` 目录下
-   每个压缩包会创建独立的子目录
-   解压过程会显示详细的日志信息

## 注意事项

1. **文件覆盖**: 如果存在同名文件，会覆盖原有文件
2. **权限**: 确保脚本有执行权限
3. **工具依赖**:
    - Ubuntu/Linux: 自动安装所需工具
    - macOS: 需要手动安装 `brew install unrar p7zip`

## 工作流配置

GitHub Actions 工作流包含以下步骤：

1. **环境准备**: 安装 Node.js 和依赖
2. **工具安装**: 安装解压工具 (unzip, unrar, p7zip)
3. **文件解压**: 自动扫描并解压所有压缩包
4. **构建应用**: 运行项目构建
5. **上传产物**: 将构建结果和解压文件上传为产物

## 故障排除

如果解压失败，请检查：

1. 压缩包文件是否损坏
2. 是否有足够的磁盘空间
3. 文件权限是否正确
4. 是否安装了必要的解压工具

## 示例输出

```
开始扫描压缩包文件...
处理 ZIP 文件...
解压: ./example.zip
处理 TAR.GZ 文件...
解压: ./archive.tar.gz
==========================================
解压完成！
共处理了 2 个压缩包
解压后的文件结构：
extracted/
├── example/
│   └── files...
└── archive/
    └── files...
==========================================
```
